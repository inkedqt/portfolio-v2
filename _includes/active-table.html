{% assign items = site.data.active %}

<div class="htb-table-wrapper">
  <table class="htb-table">
    <colgroup>
      <col class="col-machine">
      <col class="col-difficulty">
      <col class="col-status">
      <col class="col-proof">
      <col class="col-writeup">
      <col class="col-summary">
    </colgroup>

    <thead>
      <tr>
        <th>Machine</th>
        <th>Difficulty</th>
        <th>Status</th>
        <th>Proof</th>
        <th>Writeup</th>
        <th>Summary</th>
      </tr>
    </thead>

    <tbody>
    {% for m in items %}
      <tr>
        <td>{{ m.name }}</td>
        <td>{{ m.difficulty }}</td>
        <td>{{ m.status }}</td>

        <td>
          {% if m.proof_img %}
            <img class="proof-img" src="{{ m.proof_img }}" alt="Proof for {{ m.name }}" />
          {% else %}
            —
          {% endif %}
        </td>

        <td>
          {% if m.writeup_url and m.writeup_url != "" %}
            <a class="writeup-link" href="{{ m.writeup_url }}">View</a>
          {% else %}
            —
          {% endif %}
        </td>

        <td class="summary-cell">
          {% if m.summary and m.summary != "" %}
            <details class="summary-toggle">
              <summary>View chain ▶</summary>
              <div class="summary-content">{{ m.summary }}</div>
            </details>
          {% else %}
            —
          {% endif %}
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>

  {% include table-tally.html items=site.data.active title="Active tally" %}
</div>
